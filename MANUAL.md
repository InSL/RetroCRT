# Some License Nonsense

RetroCRT :: Utility suite to configure RetroPie for a CRT

Copyright (C) 2019 Duncan Brown (https://github.com/xovox)

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Installation

## Pre-Built SD Images

* Download the latest version of RetroCRT on [the release page](https://github.com/xovox/RetroCRT/releases)
* Using my image, follow the [RetroPie Installation Guide](https://retropie.org.uk/docs/First-Installation/).

## Manual Installation

## DIY

I'm assuming you're able to SSH in, or have a monitor & keyboard. I typically connect my Pi via Ethernet when I'm first

You can also do the initial configuration with a monitor hooked up to HDMI.

* [Enabling SSH](https://www.raspberrypi.org/documentation/remote-access/ssh/) on the official Raspbian docs.
  * This is best solved by putting your SD card in another machine and creating an empty file called 'ssh' in the boot
* [Wireless Connectivity](https://www.raspberrypi.org/documentation/configuration/wireless/README.md) is an option, but
* SSH Clients
  * [Windows](https://www.raspberrypi.org/documentation/remote-access/ssh/windows.md)
  * [Linux & macOS](https://www.raspberrypi.org/documentation/remote-access/ssh/unix.md)

You can cut & paste this into your terminal.

```
cd &&
git clone https://github.com/xovox/RetroCRT &&
cd RetroCRT &&
./retrocrt_setup.sh
```

# Customizing

## Splash Images

Currently broken!  See [issue #29](https://github.com/xovox/RetroCRT/issues/29) in our issue tracker.

We check for several images to display as a splash before loading our game.  In my example, we're loading mspacman.zip under FBA/FBN.  These are all in descending order of preference.

```
/home/pi/RetroPie/media/fba/images/mspacman-splash.png    <- custom splash image
/home/pi/RetroPie/media/fba/images/mspacman-splash.jpg    <- custom splash image
[preview image from gamelist.xml]
/home/pi/RetroPie/fba/images/default-splash.png     <- platform-wide splash
/home/pi/RetroPie/fba/images/default-splash.jpg     <- platform-wide splash
/home/pi/RetroPie/splashscreens/default-splash.png  <- system-wide splash
/home/pi/RetroPie/splashscreens/default-splash.jpg  <- system-wide splash
```

# How Everything Works

## Setup/Installation/Configuration

This happens in two stages

* retrocrt_setup.sh
  * This prompts the user for information & then generates our configuration file
* RetroCRT.yml
  * This is an Ansible playbook that reads the configuration & applies changes

## Upgrading

Browse to the RetroPie screen in EmulationStation & select RetroCRT where it will prompt you to upgrade..

This is currently *not* inside of RetroPie-Setup!

## Configuration Files

* /home/pi/.retrocrtrc
  * This is the configuration file generated by retrocrt_setup.sh
* /home/pi/RetroCRT/retrocrt_resolutions.csv
  * This contains per-game monitor resolution & orientation information
* /home/pi/RetroCRT/retrocrt_timings/
  * This directory contains display resolutions that we dynamically switch to

## Scripts

* /home/pi/scripts/runcommand-onstart.d/
  * files/runcommand-onstart.d/01-splash.sh
    * This displays a splash screen
  * files/runcommand-onstart.d/75-set_screen_resolution.sh
    * This changes the screen resolution, typically to 1920x240
  * files/runcommand-onstart.d/99-retrocrtdebug.sh
    * This logs debug info to /dev/shm

### Changing Screen Resolution

This happens before loading a game, and after the game exits.

```
/home/pi/RetroCRT/retrocrt_resolutions.csv
files/runcommand-onend.d/99-set_screen_resolution.sh
/home/pi/RetroCRT/retrocrt_timings/
```

### Generating RetroArch Configuration

We generate a per-game configuration for RetroArch to give it the following:
* Screen horizontal & Vertical resolutions
* Screen orientation
* Any offsets for games that run > 240p

files/runcommand-onstart.d/50-gen_ra_config.sh

```
/home/pi/RetroCRT/retrocrt_resolutions.csv
```

# Reporting Issues

GitHub.com has built-in issue tracking, that's probably best.

If you don't want to sign up for GitHub.com, join our [Facebook group](https://www.facebook.com/groups/RetroPieCRT/) and post questions or issues there.

# Troubleshooting

Most issues can be solved by re-running the installer via the RetroPie menu.  This will apply, or re-apply, all necessary changes.  Simply select 'RetroCRT' from the RetroPie section of EmulationStation.

Possibly more information can be found in [TROUBLESHOOTING.md](TROUBLESHOOTING.md).

## DIY

I'm assuming you're able to SSH in, or have a monitor & keyboard. I typically connect my Pi via Ethernet when I'm first configuring it for ease.

You can also do the initial configuration with a monitor hooked up to HDMI.

* [Enabling SSH](https://www.raspberrypi.org/documentation/remote-access/ssh/) on the official Raspbian docs.
  * This is best solved by putting your SD card in another machine and creating an empty file called 'ssh' in the boot partition.
* [Wireless Connectivity](https://www.raspberrypi.org/documentation/configuration/wireless/README.md) is an option, but I prefer wired for simplicity.
* SSH Clients
  * [Windows](https://www.raspberrypi.org/documentation/remote-access/ssh/windows.md)
  * [Linux & macOS](https://www.raspberrypi.org/documentation/remote-access/ssh/unix.md)

You can cut & paste this into your terminal.

```
cd &&
git clone https://github.com/xovox/RetroCRT &&
cd RetroCRT &&
/bin/bash ./retrocrt_setup.sh
```

# Troubleshooting

See the [troubleshooting doc](TROUBLESHOOTING.md).

# Footnotes

I am not affiliated with Mike Chi & RetroTink.

```
                                                       .
                                                       ;\
                                                      /  \
                                                      `.  i          ,^^--.
                                                   ___  i  \        /      \              ,',^-_
                                                  /   \ !   \       |       |            / /   /
                                                  \   /  \   \      |       ;      ,__. |    ,'
                                                   4 |    \   `.    |      /      (    `   __>
                                                 ,_| |_.   \    `-__>      >.      `---'\ /
                                                /,.   ..\   `.               `.         | |
                                                U |   | U     `.               \    ,--~   ~--.
--~~~~--_       _--~~~~--_       _--~~~~--_       _--~~~~--_    \  _--~~~~--_   \  /_--~~~~--_ \
         `.   ,'          `.   ,'          `.   ,'          `.  |,'          `.  \,'          `.
           \ /              \ /              \ /              \ /              \ /              \
```

|  |
